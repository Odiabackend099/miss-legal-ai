{
  "name": "MISS Legal AI - Autonomous Customer Success & Retention",
  "description": "100% autonomous customer onboarding, success monitoring, and retention management",
  "meta": {
    "templateCreatedBy": "ODIA Intelligence",
    "created": "2025-06-01",
    "version": "1.0.0",
    "category": "Customer Success Operations"
  },
  "nodes": [
    {
      "parameters": {
        "path": "customer-onboarding",
        "httpMethod": "POST",
        "authentication": "none"
      },
      "id": "onboarding-trigger",
      "name": "🚀 Customer Onboarding Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [200, 100],
      "webhookId": "customer-onboarding"
    },
    {
      "parameters": {
        "jsCode": "// 🤖 AUTONOMOUS CUSTOMER SUCCESS INTELLIGENCE\n// Personalized onboarding and success pathway generation\n\nconst customer = $input.first().json;\n\n// 🧠 CUSTOMER INTELLIGENCE ANALYSIS\nconst customerProfile = {\n  customer_id: customer.customer_id || 'CUST_' + Date.now(),\n  email: customer.email,\n  phone: customer.phone,\n  name: customer.name,\n  plan: customer.plan,\n  subscription_type: customer.subscription_type,\n  onboarding_started: new Date().toISOString(),\n  \n  // Nigerian market context\n  location: customer.location || detectLocationFromPhone(customer.phone),\n  language_preference: customer.language || 'english',\n  legal_expertise_level: assessLegalExpertise(customer),\n  technology_comfort_level: assessTechComfort(customer),\n  \n  // Business context\n  use_case_primary: customer.legal_need || 'general',\n  organization_type: customer.company ? 'business' : 'individual',\n  urgency_profile: customer.urgency || 'medium',\n  \n  // Success prediction\n  success_likelihood: calculateSuccessLikelihood(customer),\n  risk_factors: identifyRiskFactors(customer),\n  opportunity_factors: identifyOpportunityFactors(customer)\n};\n\nfunction detectLocationFromPhone(phone) {\n  if (!phone) return 'lagos'; // Default\n  \n  const nigerianCodes = {\n    '0701': 'airtel_nationwide',\n    '0708': 'airtel_nationwide', \n    '0802': 'airtel_nationwide',\n    '0808': 'airtel_nationwide',\n    '0812': 'airtel_nationwide',\n    '0701': 'mtn_nationwide',\n    '0703': 'mtn_nationwide',\n    '0706': 'mtn_nationwide',\n    '0803': 'mtn_nationwide',\n    '0806': 'mtn_nationwide',\n    '0810': 'mtn_nationwide',\n    '0813': 'mtn_nationwide',\n    '0814': 'mtn_nationwide',\n    '0815': 'mtn_nationwide',\n    '0816': 'mtn_nationwide',\n    '0903': 'mtn_nationwide',\n    '0906': 'mtn_nationwide'\n  };\n  \n  // Simple location detection - in real implementation would be more sophisticated\n  return 'nigeria_mobile'; // Placeholder\n}\n\nfunction assessLegalExpertise(customer) {\n  if (customer.company && customer.company.toLowerCase().includes('law')) return 'expert';\n  if (customer.legal_need && ['tenancy_agreement', 'power_of_attorney'].includes(customer.legal_need)) return 'intermediate';\n  return 'beginner';\n}\n\nfunction assessTechComfort(customer) {\n  // Basic assessment - would be enhanced with actual usage data\n  if (customer.plan === 'taas') return 'high'; // Enterprise users typically tech-savvy\n  if (customer.age && customer.age < 35) return 'high';\n  if (customer.age && customer.age > 60) return 'low';\n  return 'medium';\n}\n\nfunction calculateSuccessLikelihood(customer) {\n  let score = 0.5; // Base 50%\n  \n  // Plan-based scoring\n  const planScores = {\n    taas: 0.9,\n    premium_annual: 0.8,\n    premium: 0.7,\n    daas_bundle: 0.5,\n    daas_single: 0.3\n  };\n  score = planScores[customer.plan] || 0.5;\n  \n  // Adjustment factors\n  if (customer.legal_need === 'emergency') score += 0.1; // Urgent need drives success\n  if (customer.company) score += 0.1; // Business users are more committed\n  if (customer.language !== 'english') score += 0.05; // Local language users are sticky\n  \n  return Math.min(score, 0.95);\n}\n\nfunction identifyRiskFactors(customer) {\n  const risks = [];\n  \n  if (customer.plan === 'daas_single') risks.push('one_time_purchase_churn_risk');\n  if (!customer.phone) risks.push('incomplete_contact_info');\n  if (customer.urgency === 'low') risks.push('low_engagement_risk');\n  if (!customer.company && customer.plan === 'taas') risks.push('plan_mismatch_risk');\n  \n  return risks;\n}\n\nfunction identifyOpportunityFactors(customer) {\n  const opportunities = [];\n  \n  if (customer.plan === 'daas_single') opportunities.push('subscription_conversion_opportunity');\n  if (customer.company) opportunities.push('team_expansion_opportunity');\n  if (customer.legal_need === 'emergency') opportunities.push('premium_service_upsell');\n  if (customer.location === 'lagos' || customer.location === 'abuja') opportunities.push('lawyer_network_upsell');\n  \n  return opportunities;\n}\n\n// 🎯 AUTONOMOUS ONBOARDING PATH GENERATION\nconst onboardingPath = generateOnboardingPath(customerProfile);\n\nfunction generateOnboardingPath(profile) {\n  const basePath = {\n    total_duration: '7_days',\n    success_milestones: [],\n    personalized_content: [],\n    automation_sequences: [],\n    human_touchpoints: []\n  };\n  \n  // Plan-specific onboarding\n  if (profile.plan === 'taas') {\n    return {\n      ...basePath,\n      total_duration: '14_days',\n      success_milestones: [\n        { day: 1, milestone: 'admin_dashboard_access', weight: 0.2 },\n        { day: 3, milestone: 'team_member_setup', weight: 0.3 },\n        { day: 7, milestone: 'first_bulk_documents', weight: 0.3 },\n        { day: 14, milestone: 'full_feature_adoption', weight: 0.2 }\n      ],\n      personalized_content: [\n        { day: 0, content: 'enterprise_welcome_video', language: profile.language_preference },\n        { day: 1, content: 'admin_setup_guide', format: 'interactive_tutorial' },\n        { day: 3, content: 'team_onboarding_best_practices', format: 'pdf_guide' },\n        { day: 7, content: 'advanced_features_workshop', format: 'live_session' }\n      ],\n      automation_sequences: [\n        { trigger: 'day_0', action: 'assign_dedicated_success_manager' },\n        { trigger: 'day_1', action: 'schedule_onboarding_call' },\n        { trigger: 'milestone_missed', action: 'intervention_outreach' },\n        { trigger: 'day_30', action: 'quarterly_business_review_setup' }\n      ],\n      human_touchpoints: [\n        { day: 1, type: 'onboarding_call', duration: '45_minutes' },\n        { day: 7, type: 'progress_check', duration: '30_minutes' },\n        { day: 14, type: 'success_review', duration: '30_minutes' }\n      ]\n    };\n  } else if (profile.plan.includes('premium')) {\n    return {\n      ...basePath,\n      total_duration: '7_days',\n      success_milestones: [\n        { day: 1, milestone: 'first_voice_chat', weight: 0.3 },\n        { day: 2, milestone: 'document_generation', weight: 0.4 },\n        { day: 4, milestone: 'emergency_contact_setup', weight: 0.2 },\n        { day: 7, milestone: 'feature_exploration', weight: 0.1 }\n      ],\n      personalized_content: [\n        { day: 0, content: 'premium_welcome_sequence', language: profile.language_preference },\n        { day: 1, content: 'voice_chat_tutorial', format: 'interactive_demo' },\n        { day: 2, content: 'document_templates_guide', format: 'video_series' },\n        { day: 4, content: 'emergency_features_overview', format: 'infographic' }\n      ],\n      automation_sequences: [\n        { trigger: 'day_0', action: 'send_welcome_kit' },\n        { trigger: 'first_login', action: 'start_guided_tour' },\n        { trigger: 'milestone_achieved', action: 'celebration_message' },\n        { trigger: 'inactivity_48h', action: 'gentle_nudge_sequence' }\n      ],\n      human_touchpoints: [\n        { day: 3, type: 'check_in_email', personalized: true },\n        { day: 7, type: 'success_survey', with_offer: true }\n      ]\n    };\n  } else {\n    // DaaS or free plan onboarding\n    return {\n      ...basePath,\n      total_duration: '3_days',\n      success_milestones: [\n        { day: 0, milestone: 'first_document_request', weight: 0.6 },\n        { day: 1, milestone: 'document_completion', weight: 0.3 },\n        { day: 3, milestone: 'satisfaction_rating', weight: 0.1 }\n      ],\n      personalized_content: [\n        { day: 0, content: 'quick_start_guide', language: profile.language_preference },\n        { day: 1, content: 'document_tips', format: 'quick_video' },\n        { day: 2, content: 'upgrade_benefits', format: 'comparison_chart' }\n      ],\n      automation_sequences: [\n        { trigger: 'day_0', action: 'send_quick_start_email' },\n        { trigger: 'document_completed', action: 'upsell_sequence_start' },\n        { trigger: 'day_3', action: 'feedback_request' }\n      ],\n      human_touchpoints: [\n        { day: 2, type: 'upgrade_offer_email', personalized: true }\n      ]\n    };\n  }\n}\n\n// 🔄 AUTONOMOUS SUCCESS MONITORING SYSTEM\nconst successMonitoring = {\n  monitoring_frequency: profile.plan === 'taas' ? 'daily' : 'weekly',\n  key_metrics: generateKeyMetrics(profile),\n  early_warning_signals: generateWarningSignals(profile),\n  intervention_triggers: generateInterventionTriggers(profile),\n  success_rewards: generateSuccessRewards(profile)\n};\n\nfunction generateKeyMetrics(profile) {\n  const metrics = {\n    engagement_score: {\n      calculation: 'login_frequency + feature_usage + content_consumption',\n      target: profile.plan === 'taas' ? 80 : 60,\n      weight: 0.3\n    },\n    feature_adoption: {\n      calculation: 'features_used / features_available',\n      target: profile.plan === 'taas' ? 0.7 : 0.4,\n      weight: 0.4\n    },\n    value_realization: {\n      calculation: 'milestones_achieved / milestones_planned',\n      target: 0.8,\n      weight: 0.3\n    }\n  };\n  \n  // Plan-specific metrics\n  if (profile.plan === 'taas') {\n    metrics.team_activation = {\n      calculation: 'active_users / invited_users',\n      target: 0.6,\n      weight: 0.2\n    };\n  }\n  \n  return metrics;\n}\n\nfunction generateWarningSignals(profile) {\n  const signals = [\n    { signal: 'no_login_48h', severity: 'medium', action: 'engagement_outreach' },\n    { signal: 'no_feature_usage_7d', severity: 'high', action: 'intervention_call' },\n    { signal: 'support_tickets_increase', severity: 'medium', action: 'proactive_support' },\n    { signal: 'negative_feedback', severity: 'high', action: 'immediate_follow_up' }\n  ];\n  \n  if (profile.plan === 'taas') {\n    signals.push(\n      { signal: 'admin_inactive_3d', severity: 'high', action: 'admin_check_in' },\n      { signal: 'low_team_adoption', severity: 'medium', action: 'training_offer' }\n    );\n  }\n  \n  return signals;\n}\n\nfunction generateInterventionTriggers(profile) {\n  return {\n    low_engagement: {\n      threshold: 'engagement_score < 30',\n      intervention: 'personalized_success_coaching',\n      urgency: 'high'\n    },\n    feature_adoption_stall: {\n      threshold: 'feature_adoption < 0.2 AND days_since_signup > 7',\n      intervention: 'guided_feature_tour',\n      urgency: 'medium'\n    },\n    value_realization_delay: {\n      threshold: 'value_realization < 0.3 AND days_since_signup > 14',\n      intervention: 'success_manager_assignment',\n      urgency: 'high'\n    },\n    churn_risk_detected: {\n      threshold: 'multiple_warning_signals AND engagement_declining',\n      intervention: 'retention_campaign',\n      urgency: 'critical'\n    }\n  };\n}\n\nfunction generateSuccessRewards(profile) {\n  const rewards = {\n    milestone_achievements: [\n      { milestone: 'first_week_complete', reward: 'feature_unlock_bonus' },\n      { milestone: 'power_user_status', reward: 'premium_template_access' },\n      { milestone: 'referral_made', reward: 'account_credit' }\n    ],\n    loyalty_program: {\n      points_per_action: {\n        document_generated: 10,\n        voice_chat_completed: 5,\n        feature_explored: 3,\n        feedback_provided: 15\n      },\n      redemption_options: [\n        { points: 100, reward: 'free_lawyer_consultation' },\n        { points: 200, reward: 'premium_feature_unlock' },\n        { points: 500, reward: 'account_upgrade_discount' }\n      ]\n    }\n  };\n  \n  if (profile.plan === 'taas') {\n    rewards.enterprise_rewards = [\n      { achievement: 'full_team_onboarded', reward: 'additional_user_licenses' },\n      { achievement: 'high_usage_month', reward: 'dedicated_training_session' }\n    ];\n  }\n  \n  return rewards;\n}\n\n// 🚀 COMPREHENSIVE CUSTOMER SUCCESS PACKAGE\nconst customerSuccessPackage = {\n  customer_profile: customerProfile,\n  onboarding_path: onboardingPath,\n  success_monitoring: successMonitoring,\n  \n  // Immediate actions\n  immediate_actions: [\n    {\n      action: 'send_personalized_welcome',\n      timing: 'immediate',\n      personalization: {\n        language: customerProfile.language_preference,\n        plan_focus: customerProfile.plan,\n        use_case: customerProfile.use_case_primary\n      }\n    },\n    {\n      action: 'setup_success_tracking',\n      timing: 'immediate',\n      metrics: successMonitoring.key_metrics\n    },\n    {\n      action: 'schedule_onboarding_sequence',\n      timing: '5_minutes',\n      sequence: onboardingPath.automation_sequences\n    }\n  ],\n  \n  // Success prediction\n  success_prediction: {\n    likelihood: customerProfile.success_likelihood,\n    key_success_factors: customerProfile.opportunity_factors,\n    risk_mitigation_plan: generateRiskMitigationPlan(customerProfile.risk_factors),\n    expected_milestones: onboardingPath.success_milestones\n  },\n  \n  // Long-term strategy\n  long_term_strategy: {\n    retention_tactics: generateRetentionTactics(customerProfile),\n    expansion_opportunities: generateExpansionOpportunities(customerProfile),\n    advocacy_potential: assessAdvocacyPotential(customerProfile)\n  }\n};\n\nfunction generateRiskMitigationPlan(risks) {\n  const mitigationPlan = {};\n  \n  risks.forEach(risk => {\n    switch(risk) {\n      case 'one_time_purchase_churn_risk':\n        mitigationPlan[risk] = {\n          strategy: 'subscription_conversion_campaign',\n          timeline: '30_days',\n          tactics: ['value_demonstration', 'limited_time_offer', 'usage_analytics']\n        };\n        break;\n      case 'low_engagement_risk':\n        mitigationPlan[risk] = {\n          strategy: 'engagement_boost_program',\n          timeline: '14_days',\n          tactics: ['gamification', 'personal_coaching', 'peer_community']\n        };\n        break;\n      case 'plan_mismatch_risk':\n        mitigationPlan[risk] = {\n          strategy: 'plan_optimization_consultation',\n          timeline: '7_days',\n          tactics: ['usage_analysis', 'right_sizing_recommendation', 'migration_assistance']\n        };\n        break;\n    }\n  });\n  \n  return mitigationPlan;\n}\n\nfunction generateRetentionTactics(profile) {\n  const tactics = ['regular_check_ins', 'value_reinforcement', 'feature_education'];\n  \n  if (profile.plan === 'taas') {\n    tactics.push('quarterly_business_reviews', 'executive_relationship_building');\n  }\n  \n  if (profile.technology_comfort_level === 'low') {\n    tactics.push('simplified_interfaces', 'video_tutorials', 'phone_support_priority');\n  }\n  \n  return tactics;\n}\n\nfunction generateExpansionOpportunities(profile) {\n  const opportunities = [];\n  \n  if (profile.plan === 'daas_single') {\n    opportunities.push({\n      type: 'subscription_upgrade',\n      target_plan: 'premium',\n      value_proposition: 'unlimited_access_cost_savings',\n      timeline: '60_days'\n    });\n  }\n  \n  if (profile.organization_type === 'business' && profile.plan !== 'taas') {\n    opportunities.push({\n      type: 'team_expansion',\n      target_plan: 'taas',\n      value_proposition: 'team_collaboration_efficiency',\n      timeline: '90_days'\n    });\n  }\n  \n  return opportunities;\n}\n\nfunction assessAdvocacyPotential(profile) {\n  let potential = 'medium';\n  \n  if (profile.plan === 'taas' && profile.success_likelihood > 0.8) {\n    potential = 'high';\n  } else if (profile.legal_expertise_level === 'expert') {\n    potential = 'high';\n  } else if (profile.success_likelihood < 0.4) {\n    potential = 'low';\n  }\n  \n  return {\n    level: potential,\n    advocacy_programs: potential === 'high' ? ['case_study', 'referral_program', 'speaking_opportunities'] : ['referral_program'],\n    timeline: potential === 'high' ? '90_days' : '180_days'\n  };\n}\n\nconsole.log(`🚀 Customer success package created for ${customerProfile.name} - ${customerProfile.plan} plan`);\n\nreturn [{ json: customerSuccessPackage }];"
      },
      "id": "customer-success-intelligence",
      "name": "🧠 Customer Success Intelligence",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [400, 100]
    },
    {
      "parameters": {
        "resource": "rows",
        "operation": "insert",
        "table": "customer_success",
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "customer_id": "={{ $json.customer_profile.customer_id }}",
            "email": "={{ $json.customer_profile.email }}",
            "plan": "={{ $json.customer_profile.plan }}",
            "success_likelihood": "={{ $json.customer_profile.success_likelihood }}",
            "onboarding_path": "={{ JSON.stringify($json.onboarding_path) }}",
            "risk_factors": "={{ JSON.stringify($json.customer_profile.risk_factors) }}",
            "opportunity_factors": "={{ JSON.stringify($json.customer_profile.opportunity_factors) }}",
            "monitoring_frequency": "={{ $json.success_monitoring.monitoring_frequency }}",
            "created_at": "={{ $json.customer_profile.onboarding_started }}",
            "status": "onboarding_active"
          }
        }
      },
      "id": "store-customer-success",
      "name": "💾 Store Success Profile",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [600, 100],
      "credentials": {
        "supabaseApi": {
          "id": "supabase-credentials",
          "name": "Supabase MISS Legal AI"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false
          },
          "conditions": [
            {
              "id": "enterprise-plan",
              "leftValue": "={{ $json.customer_profile.plan }}",
              "rightValue": "taas",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ]
        }
      },
      "id": "check-enterprise-customer",
      "name": "🏢 Enterprise Customer Check",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [800, 100]
    },
    {
      "parameters": {
        "jsCode": "// 🏢 ENTERPRISE CUSTOMER SUCCESS AUTOMATION\n// White-glove service and dedicated account management\n\nconst customerPackage = $input.first().json;\nconst customer = customerPackage.customer_profile;\n\n// 👔 DEDICATED ACCOUNT MANAGER ASSIGNMENT\nconst accountManagerAssignment = {\n  customer_id: customer.customer_id,\n  account_manager: assignAccountManager(customer),\n  success_manager: assignSuccessManager(customer),\n  support_tier: 'enterprise_priority',\n  \n  // Enterprise onboarding timeline\n  enterprise_timeline: {\n    day_0: {\n      actions: ['welcome_call_scheduled', 'dedicated_manager_introduction', 'custom_implementation_plan'],\n      responsible: 'account_manager',\n      completion_target: '4_hours'\n    },\n    day_1: {\n      actions: ['technical_setup_session', 'admin_training', 'team_access_configuration'],\n      responsible: 'technical_specialist',\n      completion_target: '24_hours'\n    },\n    day_3: {\n      actions: ['team_onboarding_workshop', 'process_integration_review', 'success_metrics_setup'],\n      responsible: 'success_manager',\n      completion_target: '72_hours'\n    },\n    day_7: {\n      actions: ['first_week_review', 'optimization_recommendations', 'expansion_planning'],\n      responsible: 'account_manager',\n      completion_target: '1_week'\n    },\n    day_30: {\n      actions: ['monthly_business_review', 'roi_analysis', 'future_roadmap_discussion'],\n      responsible: 'account_manager',\n      completion_target: '1_month'\n    }\n  },\n  \n  // Enterprise success metrics\n  success_kpis: {\n    user_adoption_rate: { target: 80, current: 0, measurement: 'percentage' },\n    feature_utilization: { target: 70, current: 0, measurement: 'percentage' },\n    support_satisfaction: { target: 95, current: 0, measurement: 'percentage' },\n    business_value_realization: { target: 200, current: 0, measurement: 'percentage_roi' }\n  },\n  \n  // Premium services included\n  premium_services: [\n    'dedicated_account_manager',\n    'priority_technical_support',\n    'custom_integration_assistance',\n    'quarterly_business_reviews',\n    'on_demand_training_sessions',\n    'early_access_to_new_features',\n    'custom_reporting_dashboards',\n    'dedicated_slack_channel'\n  ]\n};\n\nfunction assignAccountManager(customer) {\n  // In real implementation, would check availability and expertise\n  const managers = [\n    { name: 'Adaora Okonkwo', expertise: ['legal_tech', 'enterprise_sales'], location: 'lagos' },\n    { name: 'Musa Ahmed', expertise: ['business_development', 'northern_nigeria'], location: 'abuja' },\n    { name: 'Chioma Eze', expertise: ['customer_success', 'legal_operations'], location: 'port_harcourt' }\n  ];\n  \n  // Simple assignment logic - would be more sophisticated in real implementation\n  return managers[0]; // Default to first available\n}\n\nfunction assignSuccessManager(customer) {\n  return {\n    name: 'Kemi Adebayo',\n    role: 'Senior Customer Success Manager',\n    expertise: ['legal_technology', 'enterprise_onboarding'],\n    contact: {\n      email: 'kemi.adebayo@miss-legal.ai',\n      phone: '+234-XXX-XXXX',\n      whatsapp: '+234-XXX-XXXX'\n    }\n  };\n}\n\n// 📊 ENTERPRISE MONITORING AND REPORTING\nconst enterpriseMonitoring = {\n  monitoring_frequency: 'daily',\n  reporting_schedule: {\n    daily: ['usage_metrics', 'support_tickets', 'system_health'],\n    weekly: ['adoption_progress', 'feature_utilization', 'user_feedback'],\n    monthly: ['business_review', 'roi_analysis', 'expansion_opportunities'],\n    quarterly: ['strategic_review', 'roadmap_alignment', 'contract_renewal_planning']\n  },\n  \n  // Automated alerts\n  alert_thresholds: {\n    low_usage: 'daily_active_users < 50%',\n    support_escalation: 'unresolved_tickets > 2',\n    satisfaction_drop: 'nps_score < 8',\n    feature_adoption_stall: 'new_feature_adoption < 20% after 2_weeks'\n  },\n  \n  // Success interventions\n  intervention_protocols: {\n    low_adoption: {\n      trigger: 'user_adoption < 60% after 2_weeks',\n      actions: ['dedicated_training_session', 'process_optimization_review', 'change_management_support'],\n      owner: 'success_manager'\n    },\n    technical_issues: {\n      trigger: 'support_tickets > threshold',\n      actions: ['technical_deep_dive', 'process_review', 'additional_training'],\n      owner: 'technical_specialist'\n    },\n    expansion_opportunity: {\n      trigger: 'high_usage + positive_feedback',\n      actions: ['expansion_discussion', 'additional_use_case_exploration', 'roi_presentation'],\n      owner: 'account_manager'\n    }\n  }\n};\n\n// 🎁 ENTERPRISE WELCOME PACKAGE\nconst enterpriseWelcomePackage = {\n  welcome_kit: {\n    physical_items: [\n      'branded_welcome_box',\n      'quick_reference_guides',\n      'admin_setup_handbook',\n      'team_training_materials'\n    ],\n    digital_resources: [\n      'enterprise_video_library',\n      'custom_implementation_guide',\n      'api_documentation',\n      'integration_templates',\n      'best_practices_playbook'\n    ]\n  },\n  \n  initial_setup: {\n    technical_consultation: {\n      scheduled: true,\n      duration: '2_hours',\n      participants: ['customer_admin', 'technical_specialist', 'success_manager'],\n      agenda: ['requirements_review', 'system_configuration', 'integration_planning']\n    },\n    \n    training_program: {\n      admin_training: { duration: '4_hours', format: 'interactive_workshop' },\n      end_user_training: { duration: '2_hours', format: 'group_session' },\n      train_the_trainer: { duration: '3_hours', format: 'certification_program' }\n    }\n  },\n  \n  ongoing_support: {\n    dedicated_channels: {\n      slack_channel: `miss-legal-${customer.customer_id}`,\n      priority_email: 'enterprise@miss-legal.ai',\n      direct_phone: '+234-XXX-ENTERPRISE'\n    },\n    \n    regular_touchpoints: {\n      weekly_check_ins: { duration: '30_minutes', first_month: true },\n      monthly_reviews: { duration: '60_minutes', ongoing: true },\n      quarterly_business_reviews: { duration: '90_minutes', strategic: true }\n    }\n  }\n};\n\nconst enterprisePackage = {\n  ...customerPackage,\n  enterprise_specific: {\n    account_management: accountManagerAssignment,\n    monitoring: enterpriseMonitoring,\n    welcome_package: enterpriseWelcomePackage\n  },\n  \n  immediate_enterprise_actions: [\n    {\n      action: 'assign_account_manager',\n      timing: 'immediate',\n      owner: 'operations_team'\n    },\n    {\n      action: 'schedule_welcome_call',\n      timing: '2_hours',\n      owner: 'account_manager'\n    },\n    {\n      action: 'setup_enterprise_monitoring',\n      timing: '4_hours',\n      owner: 'technical_team'\n    },\n    {\n      action: 'prepare_custom_onboarding_plan',\n      timing: '24_hours',\n      owner: 'success_manager'\n    }\n  ]\n};\n\nconsole.log(`🏢 Enterprise customer success package created for ${customer.name} - Account Manager: ${accountManagerAssignment.account_manager.name}`);\n\nreturn [{ json: enterprisePackage }];"
      },
      "id": "enterprise-customer-processing",
      "name": "🏢 Enterprise Success Management",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1000, 50]
    },
    {
      "parameters": {
        "jsCode": "// 👥 STANDARD CUSTOMER SUCCESS AUTOMATION\n// Scalable success management for premium and standard customers\n\nconst customerPackage = $input.first().json;\nconst customer = customerPackage.customer_profile;\n\n// 🎯 AUTOMATED SUCCESS JOURNEY\nconst automatedSuccessJourney = {\n  customer_id: customer.customer_id,\n  journey_type: 'automated_success',\n  assigned_success_agent: 'ai_success_assistant',\n  human_escalation_threshold: determineEscalationThreshold(customer),\n  \n  // Automated onboarding sequence\n  onboarding_automation: {\n    welcome_sequence: generateWelcomeSequence(customer),\n    feature_introduction: generateFeatureIntroduction(customer),\n    milestone_tracking: generateMilestoneTracking(customer),\n    engagement_boosters: generateEngagementBoosters(customer)\n  },\n  \n  // Success monitoring\n  automated_monitoring: {\n    health_score_calculation: {\n      engagement_weight: 0.4,\n      feature_adoption_weight: 0.3,\n      support_interaction_weight: 0.1,\n      feedback_weight: 0.2\n    },\n    \n    intervention_triggers: {\n      low_health_score: { threshold: 40, action: 'automated_intervention' },\n      no_activity_72h: { threshold: 'no_login_72h', action: 'reengagement_campaign' },\n      negative_feedback: { threshold: 'rating < 3', action: 'human_follow_up' },\n      feature_adoption_stall: { threshold: 'adoption < 30% after 1_week', action: 'guided_tutorial' }\n    }\n  },\n  \n  // Value delivery automation\n  value_delivery: {\n    quick_wins: identifyQuickWins(customer),\n    value_demonstration: generateValueDemonstration(customer),\n    success_celebration: generateSuccessCelebration(customer)\n  }\n};\n\nfunction determineEscalationThreshold(customer) {\n  if (customer.plan.includes('premium')) {\n    return {\n      health_score: 30,\n      support_tickets: 2,\n      negative_feedback: 1,\n      inactivity_days: 5\n    };\n  }\n  return {\n    health_score: 20,\n    support_tickets: 3,\n    negative_feedback: 2,\n    inactivity_days: 7\n  };\n}\n\nfunction generateWelcomeSequence(customer) {\n  const baseSequence = [\n    {\n      day: 0,\n      type: 'welcome_email',\n      content: 'personalized_welcome',\n      language: customer.language_preference,\n      includes: ['quick_start_guide', 'feature_overview', 'contact_info']\n    },\n    {\n      day: 1,\n      type: 'feature_spotlight',\n      content: 'core_feature_introduction',\n      format: 'interactive_tutorial',\n      focus: customer.use_case_primary\n    },\n    {\n      day: 3,\n      type: 'progress_check',\n      content: 'milestone_progress',\n      format: 'progress_email',\n      action_required: false\n    },\n    {\n      day: 7,\n      type: 'success_tips',\n      content: 'best_practices',\n      format: 'tip_series',\n      personalized: true\n    }\n  ];\n  \n  if (customer.plan.includes('premium')) {\n    baseSequence.push({\n      day: 14,\n      type: 'advanced_features',\n      content: 'premium_feature_deep_dive',\n      format: 'video_series',\n      unlock_features: ['emergency_priority', 'lawyer_consultation']\n    });\n  }\n  \n  return baseSequence;\n}\n\nfunction generateFeatureIntroduction(customer) {\n  const coreFeatures = [\n    {\n      feature: 'voice_chat',\n      introduction_method: 'guided_demo',\n      value_proposition: 'natural_language_legal_assistance',\n      tutorial_length: '5_minutes'\n    },\n    {\n      feature: 'document_generation',\n      introduction_method: 'step_by_step_walkthrough',\n      value_proposition: 'instant_legal_document_creation',\n      tutorial_length: '10_minutes'\n    }\n  ];\n  \n  if (customer.plan.includes('premium') || customer.plan === 'taas') {\n    coreFeatures.push(\n      {\n        feature: 'emergency_response',\n        introduction_method: 'safety_tutorial',\n        value_proposition: 'immediate_legal_emergency_assistance',\n        tutorial_length: '7_minutes'\n      },\n      {\n        feature: 'lawyer_consultation',\n        introduction_method: 'booking_demo',\n        value_proposition: 'connect_with_verified_lawyers',\n        tutorial_length: '5_minutes'\n      }\n    );\n  }\n  \n  return coreFeatures;\n}\n\nfunction generateMilestoneTracking(customer) {\n  const milestones = {\n    onboarding_milestones: [\n      { name: 'account_setup_complete', target_day: 1, points: 50 },\n      { name: 'first_voice_interaction', target_day: 2, points: 100 },\n      { name: 'first_document_generated', target_day: 3, points: 150 },\n      { name: 'profile_completion', target_day: 5, points: 75 }\n    ],\n    \n    engagement_milestones: [\n      { name: 'seven_day_active_user', target_day: 7, points: 200 },\n      { name: 'feature_explorer', criteria: 'used_3_features', points: 150 },\n      { name: 'power_user', criteria: 'daily_usage_week', points: 300 }\n    ],\n    \n    value_milestones: [\n      { name: 'first_legal_success', criteria: 'problem_resolved', points: 500 },\n      { name: 'referral_made', criteria: 'referred_friend', points: 250 },\n      { name: 'feedback_provider', criteria: 'gave_rating', points: 100 }\n    ]\n  };\n  \n  if (customer.plan === 'taas') {\n    milestones.team_milestones = [\n      { name: 'team_setup_complete', target_day: 3, points: 300 },\n      { name: 'admin_training_complete', target_day: 7, points: 200 },\n      { name: 'full_team_adoption', criteria: '80%_team_active', points: 1000 }\n    ];\n  }\n  \n  return milestones;\n}\n\nfunction generateEngagementBoosters(customer) {\n  return {\n    gamification: {\n      points_system: true,\n      badges: ['quick_starter', 'document_master', 'voice_expert', 'legal_navigator'],\n      leaderboard: customer.plan === 'taas' ? 'team_leaderboard' : false,\n      rewards: ['feature_unlocks', 'account_credits', 'premium_consultations']\n    },\n    \n    personalization: {\n      content_recommendations: generateContentRecommendations(customer),\n      feature_suggestions: generateFeatureSuggestions(customer),\n      use_case_optimization: generateUseCaseOptimization(customer)\n    },\n    \n    social_proof: {\n      success_stories: 'relevant_customer_stories',\n      testimonials: 'similar_user_testimonials',\n      community_access: customer.plan.includes('premium') ? 'premium_community' : 'general_community'\n    }\n  };\n}\n\nfunction generateContentRecommendations(customer) {\n  const recommendations = [];\n  \n  if (customer.use_case_primary === 'tenancy_agreement') {\n    recommendations.push(\n      'nigerian_tenancy_law_guide',\n      'landlord_tenant_rights_video',\n      'rent_agreement_best_practices'\n    );\n  } else if (customer.use_case_primary === 'emergency') {\n    recommendations.push(\n      'legal_emergency_preparation_guide',\n      'know_your_rights_series',\n      'emergency_contact_setup_tutorial'\n    );\n  }\n  \n  // Language-specific content\n  if (customer.language_preference !== 'english') {\n    recommendations.push(`legal_basics_${customer.language_preference}`);\n  }\n  \n  return recommendations;\n}\n\nfunction generateFeatureSuggestions(customer) {\n  const suggestions = [];\n  \n  if (customer.technology_comfort_level === 'low') {\n    suggestions.push('voice_first_approach', 'simplified_interface_mode');\n  } else {\n    suggestions.push('advanced_features_exploration', 'api_integration_options');\n  }\n  \n  if (customer.organization_type === 'business') {\n    suggestions.push('team_collaboration_features', 'business_document_templates');\n  }\n  \n  return suggestions;\n}\n\nfunction generateUseCaseOptimization(customer) {\n  return {\n    primary_use_case: customer.use_case_primary,\n    optimization_suggestions: [\n      `${customer.use_case_primary}_workflow_optimization`,\n      `${customer.use_case_primary}_automation_opportunities`,\n      `${customer.use_case_primary}_advanced_features`\n    ],\n    related_use_cases: generateRelatedUseCases(customer.use_case_primary)\n  };\n}\n\nfunction generateRelatedUseCases(primaryUseCase) {\n  const relatedCases = {\n    tenancy_agreement: ['property_disputes', 'lease_renewals', 'eviction_procedures'],\n    affidavit: ['court_proceedings', 'identity_verification', 'sworn_statements'],\n    power_of_attorney: ['business_authorization', 'property_management', 'legal_representation'],\n    emergency: ['legal_consultation', 'rights_protection', 'urgent_documentation']\n  };\n  \n  return relatedCases[primaryUseCase] || ['general_legal_assistance'];\n}\n\nfunction identifyQuickWins(customer) {\n  const quickWins = [\n    {\n      win: 'first_document_generation',\n      time_to_value: '5_minutes',\n      value_proposition: 'immediate_legal_document_ready',\n      guidance: 'step_by_step_voice_tutorial'\n    },\n    {\n      win: 'emergency_contact_setup',\n      time_to_value: '2_minutes',\n      value_proposition: 'peace_of_mind_protection',\n      guidance: 'quick_setup_wizard'\n    }\n  ];\n  \n  if (customer.plan.includes('premium')) {\n    quickWins.push({\n      win: 'lawyer_consultation_booking',\n      time_to_value: '3_minutes',\n      value_proposition: 'expert_legal_advice_access',\n      guidance: 'booking_walkthrough'\n    });\n  }\n  \n  return quickWins;\n}\n\nfunction generateValueDemonstration(customer) {\n  return {\n    roi_calculator: {\n      time_saved: 'compare_traditional_vs_ai_legal_assistance',\n      cost_savings: 'calculate_vs_traditional_lawyer_fees',\n      convenience_factor: 'availability_247_vs_office_hours'\n    },\n    \n    success_metrics: {\n      documents_generated: 'track_productivity_improvement',\n      legal_questions_answered: 'track_knowledge_gained',\n      emergency_preparedness: 'measure_peace_of_mind'\n    },\n    \n    comparative_analysis: {\n      before_miss: 'manual_legal_processes_timeline',\n      with_miss: 'automated_efficient_timeline',\n      improvement_metrics: 'speed_accuracy_cost_comparison'\n    }\n  };\n}\n\nfunction generateSuccessCelebration(customer) {\n  return {\n    milestone_celebrations: {\n      first_document: {\n        message: 'congratulations_first_legal_document',\n        reward: 'unlock_advanced_templates',\n        social_sharing: 'achievement_badge'\n      },\n      week_one_complete: {\n        message: 'successful_first_week',\n        reward: 'premium_feature_trial',\n        next_goal: 'explore_advanced_features'\n      },\n      power_user_status: {\n        message: 'legal_ai_expert_achieved',\n        reward: 'vip_support_access',\n        recognition: 'power_user_badge'\n      }\n    },\n    \n    progress_visualization: {\n      onboarding_progress_bar: true,\n      milestone_timeline: true,\n      achievement_gallery: true,\n      impact_dashboard: true\n    }\n  };\n}\n\nconst standardSuccessPackage = {\n  ...customerPackage,\n  automated_journey: automatedSuccessJourney,\n  \n  immediate_automation_actions: [\n    {\n      action: 'start_welcome_sequence',\n      timing: 'immediate',\n      owner: 'automation_system'\n    },\n    {\n      action: 'setup_health_score_monitoring',\n      timing: '1_hour',\n      owner: 'monitoring_system'\n    },\n    {\n      action: 'schedule_onboarding_milestones',\n      timing: '2_hours',\n      owner: 'milestone_system'\n    },\n    {\n      action: 'activate_engagement_boosters',\n      timing: '24_hours',\n      owner: 'engagement_system'\n    }\n  ]\n};\n\nconsole.log(`👥 Standard customer success automation activated for ${customer.name} - ${customer.plan} plan`);\n\nreturn [{ json: standardSuccessPackage }];"
      },
      "id": "standard-customer-processing",
      "name": "👥 Automated Success Management",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1000, 150]
    },
    {
      "parameters": {
        "jsCode": "// 📧 AUTONOMOUS CUSTOMER COMMUNICATION ENGINE\n// Personalized, multi-channel customer communications\n\nconst successPackage = $input.first().json;\nconst customer = successPackage.customer_profile;\n\n// 🗣️ MULTI-LANGUAGE COMMUNICATION GENERATOR\nconst communicationPlan = {\n  customer_id: customer.customer_id,\n  primary_language: customer.language_preference,\n  communication_preferences: detectCommunicationPreferences(customer),\n  \n  immediate_communications: generateImmediateCommunications(customer, successPackage),\n  ongoing_communications: generateOngoingCommunications(customer, successPackage),\n  milestone_communications: generateMilestoneCommunications(customer, successPackage)\n};\n\nfunction detectCommunicationPreferences(customer) {\n  return {\n    preferred_channels: ['email', 'whatsapp'], // Nigerian preference for WhatsApp\n    frequency: customer.plan === 'taas' ? 'high' : 'medium',\n    time_zone: 'Africa/Lagos',\n    business_hours: {\n      start: '08:00',\n      end: '18:00',\n      days: ['monday', 'tuesday', 'wednesday', 'thursday', 'friday']\n    },\n    cultural_considerations: {\n      greeting_style: getGreetingStyle(customer.language_preference),\n      formality_level: customer.plan === 'taas' ? 'formal' : 'friendly',\n      cultural_references: true\n    }\n  };\n}\n\nfunction getGreetingStyle(language) {\n  const greetings = {\n    english: 'professional_warm',\n    pidgin: 'casual_friendly',\n    yoruba: 'respectful_traditional',\n    hausa: 'respectful_traditional',\n    igbo: 'warm_community_focused'\n  };\n  return greetings[language] || greetings.english;\n}\n\nfunction generateImmediateCommunications(customer, successPackage) {\n  const welcomeEmail = generateWelcomeEmail(customer, successPackage);\n  const welcomeWhatsApp = generateWelcomeWhatsApp(customer);\n  \n  return {\n    welcome_email: {\n      to: customer.email,\n      subject: generateWelcomeSubject(customer),\n      content: welcomeEmail,\n      priority: 'high',\n      tracking: {\n        campaign: 'customer_onboarding',\n        customer_id: customer.customer_id,\n        plan: customer.plan\n      },\n      send_time: 'immediate'\n    },\n    \n    welcome_whatsapp: {\n      to: customer.phone,\n      message: welcomeWhatsApp,\n      media: {\n        type: 'image',\n        url: 'welcome_infographic_' + customer.language_preference + '.jpg'\n      },\n      send_time: '5_minutes_after_email'\n    },\n    \n    setup_guidance: {\n      type: 'interactive_tutorial',\n      content: generateSetupGuidance(customer),\n      delivery_method: 'in_app_notification',\n      trigger: 'first_login'\n    }\n  };\n}\n\nfunction generateWelcomeSubject(customer) {\n  const subjects = {\n    english: `Welcome to MISS Legal AI, ${customer.name}! Your Nigerian Legal Assistant is Ready`,\n    pidgin: `Welcome ${customer.name}! MISS Legal AI don ready to help you`,\n    yoruba: `Ẹ kú àbọ̀ sí MISS Legal AI, ${customer.name}! Olùrànlọ́wọ́ òfin wa ti sẹ́tan`,\n    hausa: `Barka da zuwa MISS Legal AI, ${customer.name}! Mataimakin doka ya shirya`,\n    igbo: `Nnọọ na MISS Legal AI, ${customer.name}! Onye enyemaka iwu gị adịla njikere`\n  };\n  \n  return subjects[customer.language_preference] || subjects.english;\n}\n\nfunction generateWelcomeEmail(customer, successPackage) {\n  const greeting = getGreeting(customer.language_preference, customer.name);\n  const planBenefits = getPlanBenefits(customer.plan, customer.language_preference);\n  const quickStart = getQuickStart(customer, successPackage);\n  const support = getSupportInfo(customer.language_preference);\n  \n  let content = `${greeting}\\n\\n`;\n  \n  // Welcome message\n  const welcomeMessages = {\n    english: `Welcome to MISS Legal AI - Nigeria's most advanced legal assistant! We're excited to help you navigate the Nigerian legal system with confidence and ease.`,\n    pidgin: `Welcome to MISS Legal AI - Nigeria best legal assistant! We dey happy to help you understand Nigerian law matter easily.`,\n    yoruba: `Ẹ kú àbọ̀ sí MISS Legal AI - olùrànlọ́wọ́ òfin tí ó dára jù ní Nàìjíríà! A dùnnú láti ràn yín lọ́wọ́ pẹ̀lú ọ̀rọ̀ òfin.`,\n    hausa: `Barka da zuwa MISS Legal AI - mafi kyawun mataimakin doka a Najeriya! Muna farin ciki da taimaka muku game da tsarin doka.`,\n    igbo: `Nnọọ na MISS Legal AI - onye enyemaka iwu kachasị mma na Naịjirịa! Anyị nwere obi ụtọ inyere gị aka n'okwu iwu.`\n  };\n  \n  content += welcomeMessages[customer.language_preference] || welcomeMessages.english;\n  content += '\\n\\n';\n  \n  // Plan-specific benefits\n  content += planBenefits + '\\n\\n';\n  \n  // Quick start guide\n  content += quickStart + '\\n\\n';\n  \n  // Support information\n  content += support + '\\n\\n';\n  \n  // Cultural sign-off\n  const signOffs = {\n    english: 'Best regards,\\nThe MISS Legal AI Team\\nPowered by ODIA AI Solutions\\n\"Even at 1am, MISS go para for you legally.\"',\n    pidgin: 'Best regards,\\nThe MISS Legal AI Team\\nPowered by ODIA AI Solutions\\n\"Even for 1am, MISS go dey there for you legally.\"',\n    yoruba: 'Ẹ ṣé gan,\\nEgbé MISS Legal AI\\nPowered by ODIA AI Solutions\\n\"Paapaa ní ago kan òru, MISS wa láti ran yin lọwọ.\"',\n    hausa: 'Da godiya,\\nTawagar MISS Legal AI\\nPowered by ODIA AI Solutions\\n\"Ko da karfe daya da dare, MISS na nan don taimaka muku.\"',\n    igbo: 'Nke ọma,\\nNdị otu MISS Legal AI\\nPowered by ODIA AI Solutions\\n\"Ọbụladị n\\'elekere otu nke abalị, MISS nọ ebe a inyere gị aka.\"'\n  };\n  \n  content += signOffs[customer.language_preference] || signOffs.english;\n  \n  return content;\n}\n\nfunction getGreeting(language, name) {\n  const greetings = {\n    english: `Dear ${name},`,\n    pidgin: `How far ${name},`,\n    yoruba: `Ẹ kú àárọ̀ ${name},`,\n    hausa: `Sannu ${name},`,\n    igbo: `Ndewo ${name},`\n  };\n  return greetings[language] || greetings.english;\n}\n\nfunction getPlanBenefits(plan, language) {\n  const benefits = {\n    english: {\n      taas: '🏢 As an Enterprise customer, you have access to:\\n• Unlimited users for your organization\\n• Priority support with dedicated account manager\\n• Custom integrations and admin dashboard\\n• Advanced analytics and reporting',\n      premium: '💎 As a Premium member, you enjoy:\\n• Unlimited voice conversations with Minnie Max\\n• Unlimited legal document generation\\n• Priority emergency response\\n• Direct lawyer consultations',\n      daas: '📄 With Document-as-a-Service, you can:\\n• Generate professional legal documents instantly\\n• Access Nigerian-compliant templates\\n• Get voice-guided document creation\\n• Download court-ready PDFs'\n    },\n    pidgin: {\n      taas: '🏢 As Enterprise customer, you get:\\n• Unlimited users for your company\\n• Special support with person wey go dey help you\\n• Custom integration and admin dashboard\\n• Better analytics and reporting',\n      premium: '💎 As Premium member, you enjoy:\\n• Unlimited gist with Minnie Max\\n• Unlimited legal document generation\\n• Emergency response sharp sharp\\n• Direct lawyer consultation',\n      daas: '📄 With Document service, you fit:\\n• Generate professional legal documents quick\\n• Get Nigerian law templates\\n• Voice go guide you create document\\n• Download court-ready PDFs'\n    }\n  };\n  \n  const languageBenefits = benefits[language] || benefits.english;\n  const planKey = plan.includes('premium') ? 'premium' : plan.includes('taas') ? 'taas' : 'daas';\n  \n  return languageBenefits[planKey];\n}\n\nfunction getQuickStart(customer, successPackage) {\n  const quickStarts = {\n    english: `🚀 Get Started in 3 Easy Steps:\\n1. Complete your profile setup\\n2. Try your first voice conversation\\n3. Generate your first legal document\\n\\nClick here to begin: [START_NOW_LINK]`,\n    pidgin: `🚀 Start am with 3 easy steps:\\n1. Complete your profile setup\\n2. Try your first voice conversation\\n3. Generate your first legal document\\n\\nClick here make you start: [START_NOW_LINK]`\n  };\n  \n  return quickStarts[customer.language_preference] || quickStarts.english;\n}\n\nfunction getSupportInfo(language) {\n  const support = {\n    english: `📞 Need Help? We're Here 24/7:\\n• WhatsApp: +234-XXX-XXXX\\n• Email: support@miss-legal.ai\\n• Emergency Line: +234-XXX-EMERGENCY\\n\\n🛡️ Your privacy is protected under Nigeria's Data Protection Regulation (NDPR).`,\n    pidgin: `📞 You need help? We dey here 24/7:\\n• WhatsApp: +234-XXX-XXXX\\n• Email: support@miss-legal.ai\\n• Emergency Line: +234-XXX-EMERGENCY\\n\\n🛡️ Your privacy dey protected under Nigeria Data Protection law.`\n  };\n  \n  return support[language] || support.english;\n}\n\nfunction generateWelcomeWhatsApp(customer) {\n  const messages = {\n    english: `🎉 Welcome to MISS Legal AI, ${customer.name}! Your personal Nigerian legal assistant is ready. Try saying \"Help me with a tenancy agreement\" to get started! 🏠⚖️`,\n    pidgin: `🎉 Welcome to MISS Legal AI, ${customer.name}! Your personal legal assistant don ready. Talk say \"Help me with tenancy agreement\" make you start! 🏠⚖️`,\n    yoruba: `🎉 Ẹ kú àbọ̀ sí MISS Legal AI, ${customer.name}! Olùrànlọ́wọ́ òfin yín ti sẹ́tan. Ẹ sọ pé \"Ẹ bá mi ṣe tenancy agreement\" láti bẹ̀rẹ̀! 🏠⚖️`,\n    hausa: `🎉 Barka da zuwa MISS Legal AI, ${customer.name}! Mataimakin doka ya shirya. Ka ce \"Taimake ni da yarjejeniya gida\" don farawa! 🏠⚖️`,\n    igbo: `🎉 Nnọọ na MISS Legal AI, ${customer.name}! Onye enyemaka iwu gị adịla njikere. Kwuo \"Nyere m aka na nkwekọrịta ụlọ\" ka ị malite! 🏠⚖️`\n  };\n  \n  return messages[customer.language_preference] || messages.english;\n}\n\nfunction generateSetupGuidance(customer) {\n  return {\n    steps: [\n      {\n        title: getLocalizedText('complete_profile', customer.language_preference),\n        description: getLocalizedText('profile_description', customer.language_preference),\n        estimated_time: '2_minutes',\n        required: true\n      },\n      {\n        title: getLocalizedText('voice_test', customer.language_preference),\n        description: getLocalizedText('voice_test_description', customer.language_preference),\n        estimated_time: '1_minute',\n        required: false\n      },\n      {\n        title: getLocalizedText('emergency_setup', customer.language_preference),\n        description: getLocalizedText('emergency_description', customer.language_preference),\n        estimated_time: '3_minutes',\n        required: customer.plan.includes('premium') || customer.plan === 'taas'\n      }\n    ],\n    completion_reward: {\n      type: 'feature_unlock',\n      value: 'advanced_templates',\n      description: getLocalizedText('completion_reward', customer.language_preference)\n    }\n  };\n}\n\nfunction getLocalizedText(key, language) {\n  const texts = {\n    english: {\n      complete_profile: 'Complete Your Profile',\n      profile_description: 'Add your location and legal interests for personalized assistance',\n      voice_test: 'Test Voice Feature',\n      voice_test_description: 'Try a quick voice conversation to ensure everything works perfectly',\n      emergency_setup: 'Setup Emergency Contacts',\n      emergency_description: 'Add trusted contacts for emergency legal situations',\n      completion_reward: 'Unlock advanced legal document templates'\n    },\n    pidgin: {\n      complete_profile: 'Complete Your Profile',\n      profile_description: 'Add your location and wetin you like for law matter so we fit help you well',\n      voice_test: 'Test Voice Feature',\n      voice_test_description: 'Try quick voice conversation make sure everything dey work well',\n      emergency_setup: 'Setup Emergency Contacts',\n      emergency_description: 'Add people wey you trust for emergency legal wahala',\n      completion_reward: 'Unlock better legal document templates'\n    }\n  };\n  \n  return texts[language]?.[key] || texts.english[key];\n}\n\nfunction generateOngoingCommunications(customer, successPackage) {\n  return {\n    onboarding_sequence: generateOnboardingSequence(customer),\n    engagement_campaigns: generateEngagementCampaigns(customer),\n    educational_content: generateEducationalContent(customer),\n    retention_communications: generateRetentionCommunications(customer)\n  };\n}\n\nfunction generateOnboardingSequence(customer) {\n  const sequence = [];\n  \n  // Day 1: Feature introduction\n  sequence.push({\n    day: 1,\n    type: 'feature_introduction',\n    subject: getLocalizedText('day1_subject', customer.language_preference),\n    content_type: 'interactive_email',\n    focus: 'core_features_overview'\n  });\n  \n  // Day 3: Progress check\n  sequence.push({\n    day: 3,\n    type: 'progress_check',\n    subject: getLocalizedText('day3_subject', customer.language_preference),\n    content_type: 'progress_update_email',\n    includes_offer: customer.plan.includes('daas') ? 'subscription_upgrade' : false\n  });\n  \n  // Day 7: Success tips\n  sequence.push({\n    day: 7,\n    type: 'success_tips',\n    subject: getLocalizedText('day7_subject', customer.language_preference),\n    content_type: 'tips_and_tricks_email',\n    personalized: true\n  });\n  \n  if (customer.plan === 'taas') {\n    // Day 14: Business review (Enterprise only)\n    sequence.push({\n      day: 14,\n      type: 'business_review',\n      subject: 'Your First Two Weeks with MISS Legal AI - Business Impact Review',\n      content_type: 'business_metrics_report',\n      includes_meeting_request: true\n    });\n  }\n  \n  return sequence;\n}\n\nfunction generateEngagementCampaigns(customer) {\n  return {\n    feature_adoption: {\n      trigger: 'low_feature_usage',\n      content: 'unused_features_showcase',\n      frequency: 'weekly',\n      channels: ['email', 'in_app']\n    },\n    \n    usage_encouragement: {\n      trigger: 'inactivity_3_days',\n      content: 'we_miss_you_campaign',\n      frequency: 'as_needed',\n      channels: ['whatsapp', 'email']\n    },\n    \n    value_reinforcement: {\n      trigger: 'usage_milestone',\n      content: 'value_achieved_celebration',\n      frequency: 'milestone_based',\n      channels: ['email', 'whatsapp']\n    }\n  };\n}\n\nfunction generateEducationalContent(customer) {\n  return {\n    legal_education: {\n      frequency: 'weekly',\n      topics: generateLegalTopics(customer),\n      format: 'email_newsletter',\n      language: customer.language_preference\n    },\n    \n    feature_education: {\n      frequency: 'bi_weekly',\n      content: 'advanced_feature_tutorials',\n      format: 'video_series',\n      personalized: true\n    },\n    \n    nigerian_law_updates: {\n      frequency: 'monthly',\n      content: 'nigerian_legal_system_updates',\n      format: 'digest_email',\n      includes_miss_analysis: true\n    }\n  };\n}\n\nfunction generateLegalTopics(customer) {\n  const topics = {\n    general: ['nigerian_constitution_basics', 'know_your_rights', 'court_system_explained'],\n    tenancy_agreement: ['landlord_tenant_rights', 'rent_laws_nigeria', 'eviction_procedures'],\n    emergency: ['legal_emergency_preparedness', 'police_interaction_rights', 'legal_aid_access'],\n    business: ['business_law_basics', 'contract_law_nigeria', 'corporate_compliance']\n  };\n  \n  return topics[customer.use_case_primary] || topics.general;\n}\n\nfunction generateRetentionCommunications(customer) {\n  return {\n    satisfaction_surveys: {\n      frequency: 'monthly',\n      timing: 'after_milestone_achievement',\n      incentive: 'feature_unlock_for_completion'\n    },\n    \n    loyalty_rewards: {\n      frequency: 'quarterly',\n      content: 'loyalty_appreciation_gifts',\n      includes_referral_bonus: true\n    },\n    \n    renewal_campaigns: {\n      trigger: customer.subscription_type === 'subscription' ? '30_days_before_renewal' : 'high_usage_pattern',\n      content: 'renewal_value_proposition',\n      includes_discount: true\n    }\n  };\n}\n\nfunction generateMilestoneCommunications(customer, successPackage) {\n  const milestones = successPackage.onboarding_path.success_milestones;\n  \n  return milestones.map(milestone => ({\n    milestone: milestone.milestone,\n    trigger: `${milestone.milestone}_achieved`,\n    communication: {\n      type: 'celebration_message',\n      subject: generateMilestoneSubject(milestone.milestone, customer.language_preference),\n      content: generateMilestoneContent(milestone.milestone, customer),\n      reward: generateMilestoneReward(milestone.milestone, customer.plan),\n      next_goal: generateNextGoal(milestone.milestone, milestones)\n    }\n  }));\n}\n\nfunction generateMilestoneSubject(milestone, language) {\n  const subjects = {\n    english: {\n      first_voice_chat: '🎉 Congratulations! You\\'ve mastered voice chat with MISS',\n      document_generation: '📄 Amazing! Your first legal document is ready',\n      emergency_contact_setup: '🛡️ Great job! Your emergency protection is active',\n      feature_exploration: '🚀 Wow! You\\'re becoming a MISS Legal AI expert'\n    },\n    pidgin: {\n      first_voice_chat: '🎉 Congratulations! You don master voice chat with MISS',\n      document_generation: '📄 Amazing! Your first legal document don ready',\n      emergency_contact_setup: '🛡️ Well done! Your emergency protection don active',\n      feature_exploration: '🚀 Wow! You dey become MISS Legal AI expert'\n    }\n  };\n  \n  const languageSubjects = subjects[language] || subjects.english;\n  return languageSubjects[milestone] || `🎉 Milestone achieved: ${milestone}`;\n}\n\nfunction generateMilestoneContent(milestone, customer) {\n  // Generate personalized celebration content based on milestone and customer profile\n  return {\n    achievement_recognition: `personalized_celebration_${milestone}`,\n    progress_summary: 'onboarding_progress_update',\n    value_achieved: `value_demonstration_${milestone}`,\n    next_steps: `next_recommended_actions_${milestone}`,\n    social_sharing: {\n      enabled: true,\n      message: `I just achieved ${milestone} with MISS Legal AI! 🎉`,\n      platforms: ['twitter', 'linkedin', 'whatsapp_status']\n    }\n  };\n}\n\nfunction generateMilestoneReward(milestone, plan) {\n  const rewards = {\n    first_voice_chat: { type: 'feature_unlock', value: 'advanced_voice_commands' },\n    document_generation: { type: 'template_unlock', value: 'premium_document_templates' },\n    emergency_contact_setup: { type: 'service_upgrade', value: 'priority_emergency_response' },\n    feature_exploration: { type: 'account_credit', value: plan === 'taas' ? 5000 : 1000 }\n  };\n  \n  return rewards[milestone] || { type: 'points', value: 100 };\n}\n\nfunction generateNextGoal(currentMilestone, allMilestones) {\n  const currentIndex = allMilestones.findIndex(m => m.milestone === currentMilestone);\n  const nextMilestone = allMilestones[currentIndex + 1];\n  \n  return nextMilestone ? {\n    milestone: nextMilestone.milestone,\n    description: `next_goal_${nextMilestone.milestone}`,\n    estimated_completion: `${nextMilestone.day - allMilestones[currentIndex].day}_days`,\n    reward_preview: generateMilestoneReward(nextMilestone.milestone, 'preview')\n  } : {\n    milestone: 'graduation_to_power_user',\n    description: 'become_miss_legal_ai_expert',\n    reward_preview: { type: 'status_upgrade', value: 'power_user_benefits' }\n  };\n}\n\nconst finalCommunicationPackage = {\n  ...successPackage,\n  communication_plan: communicationPlan\n};\n\nconsole.log(`📧 Communication plan generated for ${customer.name} in ${customer.language_preference}`);\n\nreturn [{ json: finalCommunicationPackage }];"
      },
      "id": "communication-engine",
      "name": "📧 Multi-Language Communication Engine",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1200, 100]
    }
  ],
  "connections": {
    "onboarding-trigger": {
      "main": [
        [
          {
            "node": "customer-success-intelligence",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "customer-success-intelligence": {
      "main": [
        [
          {
            "node": "store-customer-success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "store-customer-success": {
      "main": [
        [
          {
            "node": "check-enterprise-customer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check-enterprise-customer": {
      "main": [
        [
          {
            "node": "enterprise-customer-processing",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "standard-customer-processing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "enterprise-customer-processing": {
      "main": [
        [
          {
            "node": "communication-engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "standard-customer-processing": {
      "main": [
        [
          {
            "node": "communication-engine",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": ["customer_success", "onboarding", "retention"],
  "triggerCount": 1,
  "updatedAt": "2025-06-01T00:00:00.000Z",
  "versionId": "customer-success-v1"
}
