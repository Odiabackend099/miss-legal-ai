{"raw_content": "{\n  \"data\": {\n    \"extracted_information\": \"The provided web content details Flutterwave's Payment Plans feature, which allows businesses to set up and manage customer subscriptions. Key aspects covered include creating payment plans with customizable billing intervals, amounts, and durations, subscribing customers by linking a plan ID during the initial charge, handling dynamic subscription amounts, managing the subscription lifecycle through cancellation and activation options, and receiving webhook notifications for charge events and cancellations. The content also provides API endpoints and code examples for interacting with the payment plan system programmatically.\",\n    \"specifications\": {\n      \"supported_intervals\": [\n        \"hourly\",\n        \"daily\",\n        \"weekly\",\n        \"monthly\",\n        \"yearly\",\n        \"quarterly\",\n        \"bi-annually\",\n        \"every x y\"\n      ],\n      \"plan_parameters\": [\n        {\"name\": \"name\", \"description\": \"The name of the plan.\"},\n        {\"name\": \"interval\", \"description\": \"The billing interval.\"},\n        {\"name\": \"amount\", \"description\": \"The amount to charge each time (optional).\"},\n        {\"name\": \"currency\", \"description\": \"The currency to charge in (optional, default NGN).\"},\n        {\"name\": \"duration\", \"description\": \"How long the subscription should last in terms of intervals (optional, indefinite if not specified).\"}\n      ],\n      \"failed_charge_retries\": \"3 more times at 30-minute intervals after the initial failure.\",\n      \"automatic_cancellation\": \"Triggered after three consecutive failed charge attempts.\",\n      \"subscription_identifier\": \"Tied to a customer's email address and cannot be changed.\",\n      \"webhook_events\": [\n        \"charge.completed\" (for successful/failed recurring charges),\n        \"subscription.cancelled\"\n      ],\n      \"webhook_payload_examples\": {\n        \"charge.completed\": {\n          \"event\": \"charge.completed\",\n          \"data\": {\n            \"id\": 285959875,\n            \"tx_ref\": \"...\",\n            \"flw_ref\": \"...\",\n            \"amount\": 100,\n            \"currency\": \"NGN\",\n            \"charged_amount\": 100,\n            \"status\": \"successful\",\n            \"payment_type\": \"card\",\n            \"...\": \"...\"\n          }\n        },\n        \"subscription.cancelled\": {\n          \"event\": \"subscription.cancelled\",\n          \"data\": {\n            \"status\": \"deactivated\",\n            \"currency\": \"NGN\",\n            \"amount\": 200,\n            \"customer\": {\n              \"email\": \"...\",\n              \"full_name\": \"...\"\n            },\n            \"plan\": {\n              \"id\": 10944,\n              \"name\": \"...\",\n              \"amount\": 200,\n              \"currency\": \"NGN\",\n              \"interval\": \"monthly\",\n              \"duration\": 1,\n              \"status\": \"cancel\",\n              \"...\": \"...\"\n            }\n          }\n        }\n      }\n    },\n    \"pricing\": {\n      \"subscription_amount\": \"Set as a parameter ('amount') when creating the payment plan or when charging the customer for the first time. Can be dynamic.\",\n      \"dynamic_amount_handling\": {\n        \"different_amount_per_customer\": \"Do not set 'amount' when creating the plan; amount set during customer charge is used for the subscription.\",\n        \"different_first_payment_amount\": \"Set standard 'amount' when creating the plan; custom 'amount' set during the first customer charge is used initially, and the standard plan amount is used for subsequent payments.\"\n      }\n    },\n    \"features\": [\n      \"Create payment plans with custom intervals and durations\",\n      \"Subscribe customers to plans via API or dashboard\",\n      \"Automatic recurring billing based on the plan interval\",\n      \"Email reminders sent to customers before automatic charges\",\n      \"Automatic retry mechanism for failed charges\",\n      \"Manage subscriptions (cancel, activate) via API or dashboard\",\n      \"Handle dynamic amounts for subscriptions\",\n      \"Receive webhook notifications for charge outcomes and cancellations\",\n      \"Customer self-service cancellation option via email link (can be disabled)\"\n    ],\n    \"statistics\": {},\n    \"temporal_info\": {\n      \"billing_intervals\": \"hourly, daily, weekly, monthly, yearly, quarterly, bi-annually, every x y\",\n      \"failed_charge_retry_interval\": \"30 minutes\",\n      \"failed_charge_retry_count\": \"3 retries\"\n    },\n    \"geographical_data\": {\n      \"default_currency\": \"NGN\",\n      \"supported_currencies\": \"Defined by the 'currency' parameter in the plan creation.\"\n    },\n    \"references\": [\n      \"Help Center: https://flutterwave.com/ng/support/my-account/creating-and-cancelling-payment-plans\",\n      \"Reference Docs (Create Payment Plan): /reference/create-payment-plan-1\",\n      \"Reference Docs (Cancel Subscription): /reference/cancel-a-subscription-1\",\n      \"Reference Docs (Cancel Payment Plan): /reference/cancel-a-payment-plan\",\n      \"Reference Docs (Activate Subscription): /reference/activate-a-subscription-1\",\n      \"Reference Docs (Update Payment Plan): /reference/update-a-payment-plan\",\n      \"Reference Docs (Webhooks): /docs/webhooks\",\n      \"Contact Support: https://flutterwave.com/support/submit-request\"\n    ],\n    \"api_endpoints\": {\n      \"payment_plan_management\": [\n        {\"endpoint\": \"/reference/create-payment-plan-1\", \"description\": \"Create a new payment plan.\"},\n        {\"endpoint\": \"/reference/cancel-a-subscription-1\", \"description\": \"Cancel an individual customer's subscription.\"},\n        {\"endpoint\": \"/reference/cancel-a-payment-plan\", \"description\": \"Cancel an entire payment plan (cancels all associated subscriptions).\"},\n        {\"endpoint\": \"/reference/activate-a-subscription-1\", \"description\": \"Activate a cancelled subscription.\"},\n        {\"endpoint\": \"/reference/update-a-payment-plan\", \"description\": \"Update a payment plan (can activate a cancelled plan).\"}\n      ],\n      \"payment_initiation\": [\n        {\"endpoint\": \"/v3/payments\", \"description\": \"Standard payment endpoint used to subscribe a customer by including payment_plan ID (e.g., via Standard Node.js SDK).\"},\n        {\"endpoint\": \"https://checkout.flutterwave.com/v3/hosted/pay\", \"description\": \"HTML Checkout endpoint used to subscribe a customer by including payment_plan ID.\"},\n        {\"endpoint\": \"/v3/payment-plans\", \"description\": \"Example cURL endpoint for creating payment plans (POST).\"}\n      ]\n    },\n    \"implementation_patterns\": {\n      \"create_plan\": \"Call the Create Payment Plan API endpoint (/v3/payment-plans or via SDKs) with plan details (name, interval, amount, currency, duration).\",\n      \"subscribe_customer\": \"Include the payment_plan ID when making the customer's first charge using methods like Inline, Standard, HTML checkout, or direct card charge. The payment method is automatically fixed to 'card' when a plan is included.\",\n      \"dynamic_amounts\": \"Control amount by setting/omitting 'amount' during plan creation and/or first charge.\",\n      \"management\": \"Use specific API endpoints or the dashboard for cancelling and activating subscriptions/plans.\"\n    },\n    \"subscription_lifecycle\": {\n      \"states\": [\n        \"Active\",\n        \"Cancelled/Deactivated\"\n      ],\n      \"events\": [\n        {\"event\": \"Plan Creation\", \"description\": \"A payment plan is defined.\"},\n        {\"event\": \"Customer Subscription\", \"description\": \"A customer is linked to a plan via their first successful payment with the plan ID.\"},\n        {\"event\": \"Recurring Charge Attempt\", \"description\": \"Flutterwave automatically attempts to charge the customer's card based on the plan interval.\"},\n        {\"event\": \"Charge Success\", \"description\": \"Payment is successful; webhook notification sent.\"},\n        {\"event\": \"Charge Failure\", \"description\": \"Payment fails; retry attempts are made; webhook notification sent.\"},\n        {\"event\": \"Subscription Cancellation\", \"description\": \"Subscription is cancelled by customer, merchant, or automatically after failed retries; webhook notification sent.\"},\n        {\"event\": \"Subscription Activation\", \"description\": \"A cancelled subscription is reactivated by the merchant.\"}\n      ]\n    }\n  }\n}"}